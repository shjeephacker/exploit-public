#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
 
void bar()
{
  printf("in bar()\n");
  printf("Bar: __builtin_return_address(0) = 0x%08X\n",
    __builtin_return_address(0));
  printf("Bar: __builtin_return_address(1) = 0x%08X\n",
    __builtin_return_address(1));
}

void foo()
{
  printf("in foo()\n");
  printf("Foo: __builtin_return_address(0) = 0x%08X\n",
    __builtin_return_address(0));
  printf("Foo: __builtin_return_address(1) = 0x%08X\n",
    __builtin_return_address(1));
  bar();
}
 
int main(int argc, char **argv)
{
  printf("in main()\n");
  printf("Foo: __builtin_return_address(0) = 0x%08X\n",
    __builtin_return_address(0));
  foo();
   
  return 0;
}
